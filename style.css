/* style.css for Koozie Sports - Revised & Enhanced */

/* --- 0. Global Settings & Variables --- */
@import url('https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Roboto:wght@400;700&family=Permanent+Marker&display=swap');

:root {
    /* --- Light Mode (Default) --- */
    --bg-primary: #fdfaef; /* Notepad paper */
    --bg-secondary: rgba(230, 235, 240, 0.4); /* Subtle alt bg */
    --bg-card: #ffffff;
    --bg-header: #ffffff;
    --bg-footer: #e8e4d8;
    --bg-quote: rgba(69, 123, 157, 0.05); /* Light blue bg */
    --bg-popup: #fefefe; /* Slightly off-white for popup */
    --bg-popup-overlay: rgba(0, 0, 0, 0.6); /* Overlay for popups */
    --bg-overlay: rgba(26, 42, 74, 0.6); /* Default overlay darkness */
    --bg-overlay-gradient-start: rgba(230, 57, 70, 0.3); /* Accent Red, transparent */
    --bg-overlay-gradient-end: rgba(69, 123, 157, 0.4); /* Accent Blue, transparent */
    --bg-form-control: #ffffff;
    --bg-disabled: #e9ecef;

    --text-primary: #333333;
    --text-secondary: #555555;
    --text-headings: #1a2a4a; /* Dark Blue */
    --text-light: #ffffff;
    --text-quote: var(--text-headings);
    --text-footer: var(--text-secondary);
    --text-error: #e63946; /* Red */
    --text-success: #2a9d8f; /* Teal */
    --text-form-label: var(--text-secondary);
    --text-placeholder: #6c757d;
    --text-disabled: #6c757d;

    --border-primary: #dde4ee; /* Notepad lines */
    --border-secondary: #eeeeee; /* Card border */
    --border-accent: #f0a0a0; /* Notepad margin line (Light Red) */
    --border-header-bottom: #457b9d; /* Accent Blue */
    --border-footer-top: #e63946; /* Accent Red */
    --border-quote: #e63946; /* Accent Red */
    --border-popup: #cccccc; /* Border for popups */
    --border-form-control: #ced4da;
    --border-form-focus: #86b7fe; /* Light blue focus */

    --accent-primary: #e63946; /* Red */
    --accent-secondary: #457b9d; /* Blue */
    --accent-marker: #2a9d8f; /* Teal */

    --link-primary: var(--accent-secondary);
    --link-hover: var(--accent-primary);

    --shadow-card: 0 2px 5px rgba(0, 0, 0, 0.08);
    --shadow-header: 0 2px 5px rgba(0, 0, 0, 0.1);
    --shadow-header-scrolled: 0 4px 8px rgba(0, 0, 0, 0.15);
    --shadow-image: 0 4px 8px rgba(0, 0, 0, 0.15);
    --shadow-button: 2px 2px 5px rgba(0,0,0,0.2);
    --shadow-button-hover: 4px 6px 10px rgba(0,0,0,0.3);
    --shadow-popup: 0 5px 15px rgba(0, 0, 0, 0.25); /* Shadow for popups */
    --shadow-form-focus: 0 0 0 0.25rem rgba(13, 110, 253, 0.25); /* Bootstrap-like focus */

    /* --- Drunk Mode Variables (Overrides) --- */
    --dm-bg-primary: #fffacd; /* Lemon chiffon */
    --dm-bg-lines: #ffb6c1; /* Light pink lines */
    --dm-text-primary: #4b0082; /* Indigo text */
    --dm-text-headings: #8b0000; /* Dark red headings */
    --dm-accent-primary: #ff6347; /* Tomato red */
    --dm-accent-secondary: #1e90ff; /* Dodger blue */
    --dm-bg-card: #f0e68c; /* Khaki card bg */
    --dm-accent-marker: #ff4500; /* OrangeRed marker */
    --dm-bg-header: #fff8dc; /* Cornsilk */
    --dm-bg-footer: #faf0e6; /* Linen */
    --dm-bg-popup: #fff0f5; /* Lavender blush popup */
    --dm-border-accent: #ff69b4; /* Hot Pink */

    /* Fonts */
    --font-body: 'Roboto', sans-serif;
    --font-handwritten: 'Architects Daughter', cursive;
    --font-marker: 'Permanent Marker', cursive;
    --font-heading: 'Roboto', sans-serif; /* Using Roboto for headings for consistency */

    /* Layout */
    --container-width: 1140px;
    --header-height: 90px;
    --header-shrink-height: 65px;
    --base-spacing: 1rem; /* 16px */
    --marquee-height: 35px;
    --scroll-bar-height: 5px; /* Height for scroll progress bar */
    --nav-link-spacing: calc(var(--base-spacing) * 1.5);
    --grid-gap: calc(var(--base-spacing) * 1.5);

    /* Transitions & Effects */
    --transition-speed: 0.3s;
    --transition-slow: 0.6s;
    --bubble-size: 15px; /* For bubble effect */
    --logo-flip-duration: 0.5s;
    --marquee-duration: 40s; /* Adjust speed of marquee */
    --popup-transition-speed: 0.3s; /* Speed for popup fade/scale */
    --shake-intensity: 5px; /* Max offset for screen shake */
    --shake-duration: 0.3s; /* Duration of shake animation */
}

/* --- Dark Mode Theme Variables --- */
[data-theme="dark"] {
    --bg-primary: #1a1a1a;
    --bg-secondary: rgba(45, 45, 45, 0.6);
    --bg-card: #2a2a2a;
    --bg-header: #222222;
    --bg-footer: #1f1f1f;
    --bg-quote: rgba(168, 218, 220, 0.1); /* Light cyan hint */
    --bg-popup: #282828; /* Dark background for popups */
    --bg-popup-overlay: rgba(0, 0, 0, 0.75); /* Darker overlay */
    --bg-overlay: rgba(10, 10, 20, 0.7); /* Darker overlay */
    --bg-overlay-gradient-start: rgba(100, 30, 40, 0.4); /* Darker red */
    --bg-overlay-gradient-end: rgba(50, 80, 110, 0.5); /* Darker blue */
    --bg-form-control: #333;
    --bg-disabled: #3a3a3a;

    --text-primary: #e0e0e0;
    --text-secondary: #b0b0b0;
    --text-headings: #f5f5f5;
    --text-light: #ffffff; /* Keep white */
    --text-quote: var(--text-primary);
    --text-footer: var(--text-secondary);
    --text-error: #ff6b6b; /* Lighter red for dark bg */
    --text-success: #4ecdc4; /* Lighter teal */
    --text-form-label: var(--text-secondary);
    --text-placeholder: #888;
    --text-disabled: #888;

    --border-primary: #444444; /* Darker lines */
    --border-secondary: #3a3a3a;
    --border-accent: #a16666; /* Muted red */
    --border-header-bottom: var(--accent-secondary); /* Keep light blue */
    --border-footer-top: var(--accent-primary); /* Keep light red */
    --border-quote: var(--accent-primary); /* Keep light red */
    --border-popup: #555; /* Darker border for popups */
    --border-form-control: #555;
    --border-form-focus: var(--accent-secondary); /* Use accent color for focus */

    --accent-primary: #f07167; /* Lighter red */
    --accent-secondary: #6fc4d8; /* Lighter blue */
    --accent-marker: #4ecdc4; /* Lighter teal */

    --link-primary: var(--accent-secondary);
    --link-hover: var(--accent-primary);

    --shadow-card: 0 3px 7px rgba(0, 0, 0, 0.3);
    --shadow-header: 0 2px 6px rgba(0, 0, 0, 0.4);
    --shadow-header-scrolled: 0 4px 10px rgba(0, 0, 0, 0.5);
    --shadow-image: 0 4px 8px rgba(255, 255, 255, 0.1);
    --shadow-button: 2px 2px 6px rgba(0,0,0,0.3);
    --shadow-button-hover: 4px 6px 12px rgba(0,0,0,0.4);
    --shadow-popup: 0 8px 20px rgba(0, 0, 0, 0.5);
    --shadow-form-focus: 0 0 0 0.25rem rgba(111, 196, 216, 0.3); /* Focus based on lighter blue */

    /* Add subtle text shadow for readability */
    p, li, blockquote { text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
}


/* --- 1. Basic Reset & Global Styles --- */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* Smooth scrolling */
html {
    scroll-behavior: smooth;
    font-size: 100%; /* Base font size */
    /* Adjust scroll padding dynamically based on header state */
    /* Use min() to prevent jumpiness if header shrinks faster than scroll */
    scroll-padding-top: var(--header-height);
    transition: scroll-padding-top var(--transition-speed) ease;
}
body.header-scrolled {
     scroll-padding-top: var(--header-shrink-height);
}
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

body {
    font-family: var(--font-body);
    color: var(--text-primary);
    line-height: 1.6;
    background-color: var(--bg-primary);
    overflow-x: hidden; /* Prevent horizontal scroll */
    position: relative; /* Needed for some positioning contexts */
    padding-top: var(--header-height); /* Initial padding for fixed header */
    transition:
        padding-top var(--transition-speed) ease,
        background-color var(--transition-speed) ease,
        color var(--transition-speed) ease,
        filter var(--transition-slow) ease; /* For drunk mode blur */

    /* Notepad Background - Applied dynamically */
    /* Ensures lines stay aligned with text, adjust background-size line-height if needed */
    --line-height-em: 1.6; /* Match body line-height */
    --line-height-px: calc(var(--line-height-em) * 1em); /* Calculate pixel value */
    background-image:
        linear-gradient(var(--border-accent) 1px, transparent 1px), /* Vertical line */
        linear-gradient(var(--border-primary) 1px, transparent 1px); /* Horizontal lines */
    background-position:
        35px 0,
        0 0;
    background-size:
        1px 100%,             /* Vertical line fills height */
        100% var(--line-height-px); /* Horizontal lines match line height */
    background-repeat:
        repeat-y,             /* Vertical line repeats vertically */
        repeat;               /* Horizontal lines repeat */
    background-attachment: local, local; /* Important for lines scrolling with content */
}

/* Prevent body scroll when mobile nav OR popup is open */
body.body-menu-open,
body.live-scores-popup-open {
    overflow-y: hidden;
}

/* --- 2. Layout & Container --- */
.container {
    width: 90%;
    max-width: var(--container-width);
    margin-left: auto;
    margin-right: auto;
    padding-left: var(--base-spacing);
    padding-right: var(--base-spacing);
}

img {
    max-width: 100%;
    height: auto; /* Maintain aspect ratio */
    display: block; /* Remove extra space below image */
    vertical-align: middle; /* Align better if inline */
}

figure {
    margin: 0; /* Reset browser default figure margins */
}
figcaption {
    font-size: 0.9em;
    color: var(--text-secondary);
    margin-top: calc(var(--base-spacing) * 0.5);
}

a {
    color: var(--link-primary);
    text-decoration: none;
    transition: color var(--transition-speed) ease;
}
a:hover, a:focus-visible {
    color: var(--link-hover);
    text-decoration: underline;
}
/* Add focus-visible outline */
a:focus-visible {
    outline: 2px dashed var(--link-hover);
    outline-offset: 2px;
}
a:focus { /* Basic fallback */
    color: var(--link-hover);
    text-decoration: underline;
}

/* Basic Headings */
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    color: var(--text-headings);
    line-height: 1.2;
    margin-bottom: calc(var(--base-spacing) * 0.75);
    font-weight: 700;
    transition: color var(--transition-speed) ease;
}

h1 { font-size: clamp(2.2rem, 5vw, 2.8rem); } /* Responsive H1 */
h2 { font-size: clamp(1.8rem, 4vw, 2.2rem); margin-top: calc(var(--base-spacing) * 2.5); }
h3 { font-size: clamp(1.3rem, 3vw, 1.5rem); color: var(--accent-secondary); } /* Keep using accent for H3 */
h4 { font-size: clamp(1.1rem, 2.5vw, 1.2rem); }

p {
    margin-bottom: var(--base-spacing);
}
strong, b { font-weight: 700; }

/* Section Styling */
section {
    padding: calc(var(--base-spacing) * 3) 0;
    position: relative; /* Needed for scrollspy targeting */
    overflow: hidden; /* Prevent horizontal overflow from animations */
}

.alt-bg {
    background-color: var(--bg-secondary);
    transition: background-color var(--transition-speed) ease;
}

.section-title {
    text-align: center;
    margin-bottom: calc(var(--base-spacing) * 2);
    position: relative;
    padding-bottom: var(--base-spacing);
}
.section-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 3px;
    background-color: var(--accent-primary);
    transition: background-color var(--transition-speed) ease;
}

.section-subtitle {
    text-align: center;
    margin-top: calc(var(--base-spacing) * -1.5); /* Pull up slightly */
    margin-bottom: calc(var(--base-spacing) * 2.5); /* Increase spacing below */
    color: var(--text-secondary);
    font-size: 1.1rem;
    max-width: 700px; /* Constrain width */
    margin-left: auto;
    margin-right: auto;
    transition: color var(--transition-speed) ease;
}

/* Accessibility Helper Class */
.visually-hidden {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap; /* Keep text on one line */
  border: 0;
  margin: -1px;
  padding: 0;
}

/* --- 3. Header & Navigation --- */
#main-header {
    background-color: var(--bg-header);
    padding: 0;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000; /* Below popup overlay/progress bar */
    box-shadow: var(--shadow-header);
    height: var(--header-height);
    transition: height var(--transition-speed) ease, box-shadow var(--transition-speed) ease, background-color var(--transition-speed) ease;
    border-bottom: 3px solid var(--border-header-bottom);
}
#main-header.scrolled {
    height: var(--header-shrink-height);
    box-shadow: var(--shadow-header-scrolled);
}

.header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 100%;
}

/* Logo */
#logo-link {
    display: inline-block;
    height: 100%;
    padding: 5px 0;
    transition: padding var(--transition-speed) ease;
    flex-shrink: 0; /* Prevent logo shrinking too much */
}
#logo-link:hover, #logo-link:focus-visible { text-decoration: none; outline: none; }
#logo-link:focus { text-decoration: none; outline: none; }

#logo-img {
    height: 100%;
    width: auto;
    object-fit: contain;
    transition: height var(--transition-speed) ease;
}
.flipping-logo {
    transition: transform var(--logo-flip-duration) cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Added bounce */
    transform-style: preserve-3d;
}
.flipping-logo:hover {
    transform: scaleX(-1);
}

/* Main Navigation (Desktop) */
#main-nav { display: flex; align-items: center; }
#nav-links { list-style: none; display: flex; margin: 0; padding: 0; }
#nav-links li { margin-left: var(--nav-link-spacing); }

#nav-links a.nav-item {
    font-weight: 700;
    color: var(--text-headings);
    text-transform: uppercase;
    font-size: 0.9rem;
    padding: 5px 0;
    position: relative;
    text-decoration: none;
    letter-spacing: 0.5px;
    transition: color var(--transition-speed) ease;
}
#nav-links a.nav-item::after {
    content: '';
    position: absolute;
    bottom: -3px; /* Slightly below text */
    left: 0;
    width: 0;
    height: 2px;
    background-color: var(--accent-primary);
    transition: width var(--transition-speed) ease, background-color var(--transition-speed) ease;
}

/* Active/Hover/Focus States */
#nav-links a.nav-item:hover,
#nav-links a.nav-item:focus-visible,
#nav-links a.nav-item.active, /* .active class added by JS */
#nav-links a.nav-item[aria-current="page"] { /* Style based on aria-current */
    color: var(--link-hover);
}
#nav-links a.nav-item:focus { /* Fallback */
    color: var(--link-hover);
}

#nav-links a.nav-item:hover::after,
#nav-links a.nav-item:focus-visible::after,
#nav-links a.nav-item.active::after,
#nav-links a.nav-item[aria-current="page"]::after {
    width: 100%;
}
#nav-links a.nav-item:focus::after { /* Fallback */
    width: 100%;
}
#nav-links a.nav-item:focus-visible {
    outline: none; /* Remove default outline, rely on underline/color change */
}


/* Hamburger Menu Button (Initially Hidden) */
#hamburger-menu {
    display: none; /* Hidden by default */
    background: none;
    border: none;
    font-size: 1.8rem;
    color: var(--text-headings);
    cursor: pointer;
    padding: 5px;
    margin-left: var(--base-spacing);
    transition: color var(--transition-speed) ease, transform var(--transition-speed) ease;
    z-index: 1003; /* Above nav links overlay */
    position: relative;
}
#hamburger-menu i { transition: transform 0.2s ease-in-out; }
#hamburger-menu:focus-visible {
    outline: 2px dashed var(--link-primary);
    outline-offset: 3px;
}


/* Header Toggles Container */
.header-toggles {
    display: flex;
    align-items: center;
    gap: calc(var(--base-spacing) * 0.75);
}

/* Base Toggle Button Styles */
.header-toggles button,
.header-button-link { /* Style link like a button */
    background: none;
    border: 1px solid var(--link-primary);
    border-radius: 5px;
    color: var(--link-primary);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 6px 10px;
    transition: all var(--transition-speed) ease;
    line-height: 1;
    position: relative; /* For tooltip */
    display: inline-flex; /* Use flex for icon alignment */
    justify-content: center;
    align-items: center;
    text-decoration: none; /* Remove underline from link */
}
.header-toggles button:hover,
.header-toggles button:focus-visible,
.header-button-link:hover,
.header-button-link:focus-visible {
    background-color: var(--link-primary);
    color: var(--bg-header);
    text-decoration: none; /* Remove underline on hover */
    outline: none;
}
.header-toggles button:focus { /* Fallback */
     background-color: var(--link-primary);
     color: var(--bg-header);
     outline: none;
}
.header-button-link:focus { /* Fallback */
     background-color: var(--link-primary);
     color: var(--bg-header);
     outline: none;
}
/* Better focus outline */
.header-toggles button:focus-visible,
.header-button-link:focus-visible {
    box-shadow: 0 0 0 3px rgba(var(--link-primary), 0.4);
}

/* Tooltip Text */
.header-toggles button .tooltip-text,
.header-button-link .tooltip-text {
    position: absolute;
    bottom: calc(100% + 8px); /* Position above the button */
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.85);
    color: #fff;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 0.8rem;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition-speed) ease, visibility var(--transition-speed) ease, transform 0.2s ease;
    pointer-events: none;
    z-index: 10;
}
.header-toggles button:hover .tooltip-text,
.header-toggles button:focus-visible .tooltip-text,
.header-button-link:hover .tooltip-text,
.header-button-link:focus-visible .tooltip-text {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -3px); /* Slight upward movement */
}
.header-toggles button:focus .tooltip-text, /* Fallback */
.header-button-link:focus .tooltip-text { /* Fallback */
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -3px);
}
/* Dark mode tooltip */
[data-theme="dark"] .header-toggles button .tooltip-text,
[data-theme="dark"] .header-button-link .tooltip-text {
    background-color: rgba(240, 240, 240, 0.9);
    color: #111;
}

/* Specific Toggle Styles */
#dark-mode-toggle i { transition: display 0s; } /* Prevent transition flicker */

/* Live Scores Toggle Active State (Only applies to button variant) */
#live-scores-toggle[aria-pressed="true"] {
    background-color: var(--accent-marker);
    color: var(--text-light);
    border-color: var(--accent-marker);
}
#live-scores-toggle[aria-pressed="true"]:hover,
#live-scores-toggle[aria-pressed="true"]:focus-visible {
    background-color: var(--accent-marker);
    opacity: 0.9;
}
#live-scores-toggle[aria-pressed="true"]:focus { /* Fallback */
    background-color: var(--accent-marker);
    opacity: 0.9;
}

/* Drunk Mode Toggle Icon Swap & Active State */
/* Uses Font Awesome unicode swapping */
.drunk-mode-active #drunk-mode-toggle i.fa-beer-mug-empty::before {
     content: "\f0fc"; /* FA unicode for fa-beer (full mug) */
     font-family: "Font Awesome 6 Free"; /* Ensure correct font */
     font-weight: 900; /* Match solid style */
}
#drunk-mode-toggle[aria-pressed="true"] {
    /* Use Drunk Mode variables */
    border-color: var(--dm-accent-primary);
    color: var(--dm-accent-primary);
    background-color: rgba(255, 99, 71, 0.1); /* Light tomato bg */
}
#drunk-mode-toggle[aria-pressed="true"]:hover,
#drunk-mode-toggle[aria-pressed="true"]:focus-visible {
    background-color: var(--dm-accent-primary);
    color: var(--dm-bg-header); /* Use DM header bg for contrast */
}
#drunk-mode-toggle[aria-pressed="true"]:focus { /* Fallback */
     background-color: var(--dm-accent-primary);
     color: var(--dm-bg-header);
}

/* --- 4. Marquee Section --- */
.marquee-container {
    width: 100%;
    overflow: hidden;
    background-color: var(--accent-secondary);
    color: var(--bg-header); /* Use header bg for text */
    height: var(--marquee-height);
    line-height: var(--marquee-height);
    position: relative; /* Or sticky if needed below header */
    z-index: 999; /* Below header */
    transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.1), inset 0 -2px 4px rgba(0,0,0,0.1);
}
.marquee-content {
    display: inline-block; /* Allows animation */
    white-space: nowrap;
    padding-left: 100%; /* Start off-screen */
    animation: marquee var(--marquee-duration) linear infinite;
    font-size: 0.9rem;
    font-weight: bold;
    text-transform: uppercase;
    will-change: transform; /* Performance hint */
}
.marquee-content span {
    display: inline-block;
    padding-right: 50px; /* Spacing between repeated text */
}

@keyframes marquee {
    0% { transform: translateX(0); }
    100% { transform: translateX(-100%); }
}
/* Pause on hover/focus */
.marquee-container:hover .marquee-content,
.marquee-container:focus-within .marquee-content { /* Pause if child focused */
    animation-play-state: paused;
}

/* --- 5. Main Content Sections --- */

/* Hero Section */
#hero-section {
    /* background: var(--bg-primary); No need, body has it */
    position: relative; /* For overlay and content */
    overflow: hidden;
    color: var(--text-light);
    text-align: center;
    padding: clamp(4rem, 10vh, 6rem) 0; /* Responsive padding */
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 65vh; /* Viewport height */
    z-index: 1; /* To be above background elements */
}
.hero-video-wrapper {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: -2; /* Behind overlay and content */
    overflow: hidden;
    pointer-events: none; /* Allow clicks through */
    background-color: #000; /* Fallback color */
}
#youtube-player,
.hero-video-wrapper iframe {
    position: absolute;
    top: 50%; left: 50%;
    width: 100vw; /* Ensure it covers viewport width */
    height: 56.25vw; /* 16:9 aspect ratio */
    min-height: 100vh; /* Ensure it covers viewport height */
    min-width: 177.77vh; /* 16:9 aspect ratio */
    transform: translate(-50%, -50%); /* Center the scaled video */
    pointer-events: none;
}

.hero-overlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: -1; /* Between video and content */
    background-color: var(--bg-overlay);
    backdrop-filter: blur(8px); /* Adjusted blur */
    -webkit-backdrop-filter: blur(8px);
    background-image: linear-gradient(
        135deg,
        var(--bg-overlay-gradient-start),
        var(--bg-overlay-gradient-end)
    );
    background-size: 250% 250%; /* Slightly larger for smoother movement */
    animation: moveGradient 25s linear infinite alternate;
    transition: background-color var(--transition-speed) ease, backdrop-filter var(--transition-speed) ease;
}
@keyframes moveGradient {
    0% { background-position: 0% 0%; }
    100% { background-position: 100% 100%; }
}
[data-theme="dark"] .hero-overlay {
     background-color: rgba(10, 10, 20, 0.55); /* Darker overlay */
     backdrop-filter: blur(10px);
     -webkit-backdrop-filter: blur(10px);
}
.hero-content {
    position: relative; /* Ensure content is above overlay */
    z-index: 2;
    max-width: 800px; /* Limit content width */
    padding: var(--base-spacing);
}
#hero-section h1.hero-title {
    color: var(--text-light);
    font-family: var(--font-marker); /* Use marker font for main title */
    font-size: clamp(3rem, 8vw, 4.5rem); /* Larger, responsive */
    font-weight: 700;
    margin-bottom: var(--base-spacing);
    text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.7);
    transition: color var(--transition-speed) ease;
    letter-spacing: 1px;
}
#hero-section .tagline {
    font-family: var(--font-handwritten);
    font-size: clamp(1.5rem, 4vw, 1.9rem); /* Responsive */
    margin-bottom: calc(var(--base-spacing) * 2.5);
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.6);
    transition: color var(--transition-speed) ease;
}

/* Dynamic Quote Section */
#dynamic-quote-section {
    background-color: var(--bg-quote);
    border-top: 1px solid var(--border-primary);
    border-bottom: 1px solid var(--border-primary);
    padding: calc(var(--base-spacing) * 2.5) 0;
    transition: background-color var(--transition-speed) ease;
}
.quote-text {
    font-family: var(--font-handwritten);
    font-size: clamp(1.4rem, 3vw, 1.8rem);
    color: var(--text-quote);
    margin-bottom: calc(var(--base-spacing) * 0.75);
    border-left: 4px solid var(--border-quote);
    padding-left: var(--base-spacing);
    font-style: italic;
    transition: color var(--transition-speed) ease, border-color var(--transition-speed) ease;
}
.quote-attribution {
    font-family: var(--font-body);
    font-size: 0.95rem;
    color: var(--text-secondary);
    display: block; /* Ensure it's on its own line */
    text-align: right;
    margin-right: var(--base-spacing);
}
.quote-attribution::before {
    content: "— ";
}

/* About Us Section */
.about-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: calc(var(--grid-gap) * 1.5);
    align-items: center;
}
.about-image {
    border-radius: 5px;
    box-shadow: var(--shadow-image);
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
.about-image:hover {
    transform: scale(1.03);
}
.framed-image {
    border: 8px solid var(--bg-card);
    padding: 5px;
    background-color: var(--bg-secondary);
    box-shadow: var(--shadow-image), inset 0 0 5px rgba(0,0,0,0.1);
}
[data-theme="dark"] .framed-image {
     border: 8px solid var(--bg-card);
     background-color: var(--bg-secondary);
}


/* Featured League / Generic Grid Section */
.league-grid, .gallery-grid, .merch-grid {
    display: grid;
    /* Default to 3 columns */
    grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));
    gap: var(--grid-gap);
    list-style: none; /* Remove bullets if ul is used */
    padding: 0; /* Remove default padding if ul is used */
}
/* Example: 2 columns for social feed */
.social-feeds-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(350px, 100%), 1fr));
    gap: var(--grid-gap);
}

/* Card Styles */
.card-item {
    background-color: var(--bg-card);
    border: 1px solid var(--border-secondary);
    border-radius: 8px;
    padding: var(--base-spacing);
    box-shadow: var(--shadow-card);
    transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease, background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
    display: flex; /* Flex column layout */
    flex-direction: column;
    overflow: hidden; /* Ensure content fits */
}
.card-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.12);
}
[data-theme="dark"] .card-item:hover {
     box-shadow: 0 8px 15px rgba(0, 0, 0, 0.4);
}
.card-image {
    width: 100%;
    height: auto;
    aspect-ratio: 16 / 10; /* Default aspect ratio */
    object-fit: cover;
    border-radius: 5px 5px 0 0; /* Round top corners */
    margin-bottom: var(--base-spacing);
    border-bottom: 1px solid var(--border-secondary);
}
.card-item h3 {
    margin-top: 0; /* Reset top margin for card title */
    margin-bottom: calc(var(--base-spacing) * 0.5);
    font-size: 1.25rem;
}
.card-item p {
    font-size: 0.95rem;
    color: var(--text-secondary);
    flex-grow: 1; /* Allow paragraph to take up space */
    margin-bottom: var(--base-spacing); /* Space before link/button */
}
.card-item .read-more,
.card-item .read-more-link {
    margin-top: auto; /* Push to bottom */
    font-weight: bold;
    font-size: 0.9rem;
    display: inline-block;
}

/* Gallery Specific */
.gallery-item figure { margin-bottom: calc(var(--base-spacing) * 0.5); }
.gallery-item img.framed-image { aspect-ratio: 4 / 3; } /* Different ratio for gallery */
.gallery-item .caption { text-align: center; }

/* Merch Specific */
.merch-item { text-align: center; }
.merch-item img.card-image { aspect-ratio: 1 / 1; } /* Square images */
.merch-title { font-size: 1.3rem; margin-top: var(--base-spacing); }
.merch-description { min-height: 60px; } /* Ensure consistent height */
.merch-price { font-weight: bold; font-size: 1.1rem; color: var(--accent-primary); margin-bottom: var(--base-spacing); }
.merch-button { margin-top: auto; }
.merch-button.disabled {
    background-color: var(--text-secondary);
    cursor: not-allowed;
    opacity: 0.7;
    transform: none;
    box-shadow: none;
}
.merch-button.disabled:hover {
    background-color: var(--text-secondary);
}


/* Social Feed Specific */
.social-feed-item {
    background-color: var(--bg-card);
    border: 1px solid var(--border-secondary);
    border-radius: 8px;
    padding: var(--base-spacing);
    box-shadow: var(--shadow-card);
    /* Min height to prevent collapse before widget loads */
    min-height: 300px;
}
.social-feed-item h3 {
    display: flex;
    align-items: center;
    gap: calc(var(--base-spacing) * 0.5);
    border-bottom: 1px solid var(--border-secondary);
    padding-bottom: calc(var(--base-spacing) * 0.75);
    margin-bottom: var(--base-spacing);
}
.social-feed-item h3 i { color: var(--accent-marker); }

/* Elfsight Widget Placeholder Styles */
.elfsight-app-placeholder {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 250px;
    background-color: var(--bg-secondary);
    color: var(--text-secondary);
    border-radius: 5px;
    text-align: center;
}

/* --- 6. Contact Form --- */
.contact-form {
    max-width: 700px;
    margin: 0 auto;
    background: var(--bg-card);
    padding: calc(var(--base-spacing) * 2);
    border-radius: 8px;
    border: 1px solid var(--border-secondary);
    box-shadow: var(--shadow-card);
    transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
}
.form-group {
    margin-bottom: calc(var(--base-spacing) * 1.25);
}
.form-label {
    display: block;
    margin-bottom: calc(var(--base-spacing) * 0.4);
    font-weight: bold;
    color: var(--text-form-label);
    font-size: 0.9rem;
}
.handwritten-label {
    font-family: var(--font-handwritten);
    font-size: 1.1rem;
    font-weight: normal; /* Handwritten usually isn't bold */
}

.form-control {
    display: block;
    width: 100%;
    padding: calc(var(--base-spacing) * 0.6) var(--base-spacing);
    font-size: 1rem;
    font-family: var(--font-body);
    line-height: 1.5;
    color: var(--text-primary);
    background-color: var(--bg-form-control);
    background-clip: padding-box;
    border: 1px solid var(--border-form-control);
    appearance: none; /* Remove default styling */
    border-radius: 4px;
    transition: border-color var(--transition-speed) ease-in-out, box-shadow var(--transition-speed) ease-in-out, background-color var(--transition-speed) ease, color var(--transition-speed) ease;
}
.form-control::placeholder {
    color: var(--text-placeholder);
    opacity: 1;
}
.form-control:focus {
    color: var(--text-primary);
    background-color: var(--bg-form-control);
    border-color: var(--border-form-focus);
    outline: 0;
    box-shadow: var(--shadow-form-focus);
}
textarea.form-control {
    min-height: 120px;
    resize: vertical; /* Allow vertical resize */
}

.form-check { /* For checkboxes/radio */
    display: flex;
    align-items: center;
    gap: calc(var(--base-spacing) * 0.5);
}
.form-check-input {
    width: 1.2em; height: 1.2em;
    margin-top: 0; /* Align better */
}
.form-check-label { margin-bottom: 0; }

.form-submit {
    text-align: center;
    margin-top: calc(var(--base-spacing) * 1.5);
}
.form-status {
    margin-top: var(--base-spacing);
    text-align: center;
    font-weight: bold;
    min-height: 1.5em; /* Prevent layout jump */
}
.form-status.success { color: var(--text-success); }
.form-status.error { color: var(--text-error); }


/* --- 7. Footer --- */
#main-footer {
    background-color: var(--bg-footer);
    color: var(--text-footer);
    padding: calc(var(--base-spacing) * 2) 0;
    margin-top: calc(var(--base-spacing) * 3); /* Space above footer */
    border-top: 3px solid var(--border-footer-top);
    transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease, border-color var(--transition-speed) ease;
}
.footer-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap; /* Wrap on smaller screens */
    gap: var(--base-spacing);
}
.footer-left { text-align: left; }
.footer-right { text-align: right; }
.footer-left p { margin-bottom: calc(var(--base-spacing) * 0.3); font-size: 0.9rem; }
.footer-tagline { font-family: var(--font-handwritten); font-size: 1rem; }
.designed-by-link { font-size: 0.85rem; }
.designed-by-link i { color: var(--accent-marker); }
.designed-by-link a { color: var(--text-footer); }
.designed-by-link a:hover, .designed-by-link a:focus-visible { color: var(--link-hover); }

.social-links { display: flex; gap: calc(var(--base-spacing) * 0.8); margin-bottom: var(--base-spacing); justify-content: flex-end; }
.social-links a {
    color: var(--text-footer);
    font-size: 1.5rem;
    transition: color var(--transition-speed) ease, transform var(--transition-speed) ease;
    display: inline-block; /* Needed for transform */
}
.social-links a:hover, .social-links a:focus-visible {
    color: var(--link-hover);
    transform: scale(1.15) translateY(-2px);
    text-decoration: none;
}
.social-links a:focus-visible {
    outline: 2px dashed var(--link-hover);
    outline-offset: 3px;
}


/* --- 8. Components & Utilities --- */

/* Buttons (General CTA) */
.cta-button {
    background-color: var(--accent-primary);
    color: var(--text-light);
    padding: calc(var(--base-spacing) * 0.8) calc(var(--base-spacing) * 1.8);
    border-radius: 5px;
    text-transform: uppercase;
    font-weight: 700;
    font-size: 0.95rem;
    letter-spacing: 0.5px;
    display: inline-block;
    text-decoration: none;
    transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    box-shadow: var(--shadow-button);
    border: none;
    cursor: pointer;
}
.cta-button:hover, .cta-button:focus-visible {
    background-color: var(--link-hover);
    color: var(--text-light);
    text-decoration: none;
    transform: translateY(-3px) scale(1.02);
    box-shadow: var(--shadow-button-hover);
    outline: none;
}
.cta-button:focus { /* Fallback */
     background-color: var(--link-hover);
     color: var(--text-light);
     text-decoration: none;
     transform: translateY(-3px) scale(1.02);
     box-shadow: var(--shadow-button-hover);
     outline: none;
}
.cta-button:focus-visible {
    box-shadow: var(--shadow-button-hover), 0 0 0 3px rgba(var(--accent-primary), 0.5);
}

/* Back to Top Button */
.back-to-top {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: var(--accent-secondary);
    color: var(--text-light);
    width: 45px;
    height: 45px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.4rem;
    text-decoration: none;
    box-shadow: var(--shadow-button);
    opacity: 0; /* Hidden by default */
    visibility: hidden;
    z-index: 998;
    transition: opacity var(--transition-speed) ease, visibility var(--transition-speed) ease, background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
}
.back-to-top:hover, .back-to-top:focus-visible {
    background-color: var(--link-hover);
    color: var(--text-light);
    transform: scale(1.1);
}
.back-to-top:focus-visible {
    outline: 2px dashed var(--link-hover);
    outline-offset: 3px;
}

/* Scroll Progress Bar */
#scroll-progress-bar {
    position: fixed;
    top: 0;
    left: 0;
    height: var(--scroll-bar-height);
    background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
    width: 0%; /* Initially 0 */
    z-index: 1050; /* Above everything */
    transition: width 0.1s linear;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    mix-blend-mode: screen; /* Interesting effect, optional */
}
[data-theme="dark"] #scroll-progress-bar {
     mix-blend-mode: normal; /* Normal blending in dark mode */
}

/* Handwritten / Marker Text Styles */
.handwritten-caption, .handwritten-note, .handwritten-emphasis, .handwritten-label {
    font-family: var(--font-handwritten);
    color: var(--text-secondary);
    line-height: 1.4; /* Adjust line height for readability */
}
.handwritten-note { font-size: 0.9rem; display: block; }
.handwritten-caption { font-size: 0.85rem; }
.handwritten-emphasis {
    color: var(--accent-marker);
    font-weight: bold; /* Make emphasis stand out */
}
.marker-text {
    font-family: var(--font-marker);
    color: var(--accent-marker);
    letter-spacing: 1px;
    /* Add a subtle text background/highlight */
    /* background: linear-gradient(to top, rgba(42, 157, 143, 0.2) 40%, transparent 40%); */
    /* display: inline; */ /* Ensure background only covers text */
}
/* Beta Tag */
.beta-tag {
    font-size: 0.7rem;
    font-weight: bold;
    text-transform: uppercase;
    color: var(--bg-header);
    background-color: var(--accent-primary);
    padding: 2px 6px;
    border-radius: 3px;
    margin-left: 5px;
    vertical-align: middle;
}

/* Layout Helpers */
.layout-two-column { /* Used in About section */
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
    gap: calc(var(--grid-gap) * 1.5);
    align-items: center;
}
.text-center { text-align: center; }

/* Loading / Error States */
.loading-text {
    font-style: italic;
    color: var(--text-secondary);
    text-align: center;
    padding: var(--base-spacing);
}
.error-message {
    color: var(--text-error);
    font-weight: bold;
    text-align: center;
    padding: var(--base-spacing);
    background-color: rgba(var(--text-error), 0.1);
    border: 1px solid var(--text-error);
    border-radius: 4px;
}


/* --- 9. Effects & Animations --- */

/* Animate on Scroll */
.animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    will-change: opacity, transform;
}
.animate-on-scroll.is-visible {
    opacity: 1;
    transform: translateY(0);
}
/* Add delays */
.animate-on-scroll.delay-1 { transition-delay: 0.15s; }
.animate-on-scroll.delay-2 { transition-delay: 0.3s; }
.animate-on-scroll.delay-3 { transition-delay: 0.45s; }

/* Tilt Effect */
.tilt-element {
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --random-tilt: 0.5; /* Default value, JS might override */
}
.tilt-element:hover {
    transform: rotate(calc((var(--random-tilt) - 0.5) * 4deg)) scale(1.02); /* Tilt +/- 2deg */
}
.drunk-mode-active .tilt-element {
     /* Apply subtle random tilt constantly in drunk mode */
    transform: rotate(calc((var(--random-tilt) - 0.5) * 3deg));
    transition: transform 1s ease-in-out;
}

/* Wobble Effect */
.wobble-on-hover {
    transition: transform 0.5s ease-in-out;
}
.wobble-on-hover:hover {
    animation: wobble 0.8s ease-in-out;
}
@keyframes wobble {
  0%, 100% { transform: translateX(0%); }
  15% { transform: translateX(-8px) rotate(-3deg); }
  30% { transform: translateX(6px) rotate(2deg); }
  45% { transform: translateX(-5px) rotate(-1.5deg); }
  60% { transform: translateX(3px) rotate(1deg); }
  75% { transform: translateX(-1px) rotate(-0.5deg); }
}

/* Interactive Image Effect */
.interactive-image {
    transition: transform 0.3s ease, filter 0.3s ease;
}
.interactive-image:hover {
    transform: scale(1.05);
    filter: brightness(1.1);
}

/* --- 10. Popups (e.g., Live Scores) --- */
.popup-container {
    position: fixed;
    inset: 0; /* Cover entire viewport */
    z-index: 1040; /* Above header, below scrollbar */
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--popup-transition-speed) ease, visibility var(--popup-transition-speed) ease;
}
.popup-container:not([hidden]) {
    opacity: 1;
    visibility: visible;
}
/* Optional: Add scale transition */
.popup-container .popup-content {
    transform: scale(0.95);
    transition: transform var(--popup-transition-speed) ease;
}
.popup-container:not([hidden]) .popup-content {
    transform: scale(1);
}

.popup-overlay {
    position: absolute;
    inset: 0;
    background-color: var(--bg-popup-overlay);
    cursor: pointer; /* Indicate clicking closes */
}

.popup-content {
    position: relative; /* For close button positioning */
    background-color: var(--bg-popup);
    color: var(--text-primary); /* Ensure text color resets */
    padding: calc(var(--base-spacing) * 1.5) calc(var(--base-spacing) * 2);
    border-radius: 8px;
    box-shadow: var(--shadow-popup);
    width: 90%;
    max-width: 500px; /* Max width */
    max-height: 80vh; /* Max height */
    overflow-y: auto; /* Scroll if content exceeds height */
    z-index: 1041; /* Above overlay */
}
[data-theme="dark"] .popup-content {
    color: var(--text-primary); /* Override potential inheritance issues */
}

.popup-close-button {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 1.8rem;
    line-height: 1;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 5px;
    transition: color var(--transition-speed) ease, transform var(--transition-speed) ease;
}
.popup-close-button:hover, .popup-close-button:focus-visible {
    color: var(--text-error);
    transform: rotate(90deg);
    outline: none;
}

.popup-title {
    margin-top: 0;
    margin-bottom: var(--base-spacing);
    text-align: center;
    color: var(--accent-marker); /* Use marker color */
}

/* Live Scores Specific Styles */
#live-scores-content .score-item {
    display: flex;
    align-items: center;
    gap: var(--base-spacing);
    padding: calc(var(--base-spacing) * 0.75) 0;
    border-bottom: 1px solid var(--border-secondary);
    font-size: 0.95rem;
}
#live-scores-content .score-item:last-child {
    border-bottom: none;
}
.score-item .sport-icon { color: var(--accent-secondary); min-width: 20px; text-align: center; }
.score-item .teams { flex-grow: 1; font-weight: bold; }
.score-item .score { font-weight: bold; color: var(--accent-primary); }
.score-item .status { font-style: italic; color: var(--text-secondary); min-width: 60px; text-align: right;}


/* --- 11. Drunk Mode Specific Styles --- */
.drunk-mode-active {
    /* Apply overrides */
    --bg-primary: var(--dm-bg-primary);
    --bg-secondary: rgba(240, 230, 140, 0.4); /* Khaki hint */
    --bg-card: var(--dm-bg-card);
    --bg-header: var(--dm-bg-header);
    --bg-footer: var(--dm-bg-footer);
    --bg-popup: var(--dm-bg-popup);
    --text-primary: var(--dm-text-primary);
    --text-headings: var(--dm-text-headings);
    --text-secondary: saddlebrown; /* A brown color */
    --accent-primary: var(--dm-accent-primary);
    --accent-secondary: var(--dm-accent-secondary);
    --accent-marker: var(--dm-accent-marker);
    --border-primary: var(--dm-bg-lines);
    --border-secondary: tan;
    --border-accent: var(--dm-border-accent);
    --link-primary: var(--dm-accent-secondary);
    --link-hover: var(--dm-accent-primary);

    /* Add subtle blur */
    /* filter: blur(0.5px) contrast(1.1); */ /* Optional: Blur effect */
}
/* Ensure body background updates correctly */
.drunk-mode-active body {
    background-image:
        linear-gradient(var(--dm-border-accent) 1px, transparent 1px),
        linear-gradient(var(--dm-bg-lines) 1px, transparent 1px);
    filter: blur(0.5px);
}

/* Bubble Overlay */
#bubble-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 1030; /* Above content, below header/popups */
    overflow: hidden;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s ease, visibility 0.5s ease;
}
.drunk-mode-active #bubble-overlay {
    opacity: 1;
    visibility: visible;
    /* Animation handled by JS potentially, or CSS animation on pseudo-elements */
    /* Example: Generate bubbles via JS or use multiple background gradients */
}
/* Basic Bubble Animation Placeholder (more complex effect would need JS or many pseudo-elements) */
#bubble-overlay::before {
    content: '';
    position: absolute;
    bottom: -50px;
    left: 20%;
    width: var(--bubble-size);
    height: var(--bubble-size);
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    animation: bubble-rise 10s linear infinite;
    box-shadow: 0 0 5px rgba(255,255,255,0.5);
}
#bubble-overlay::after {
     content: '';
     position: absolute;
     bottom: -50px;
     left: 70%;
     width: calc(var(--bubble-size) * 1.5);
     height: calc(var(--bubble-size) * 1.5);
     background: rgba(255, 255, 255, 0.2);
     border-radius: 50%;
     animation: bubble-rise 15s linear infinite 2s; /* Delayed start */
     box-shadow: 0 0 8px rgba(255,255,255,0.4);
 }

@keyframes bubble-rise {
    0% { transform: translateY(0) scale(1); opacity: 0.7; }
    50% { transform: translateY(-50vh) scale(1.2); opacity: 0.4; }
    100% { transform: translateY(-100vh) scale(1.5); opacity: 0; }
}

/* Screen Shake Animation */
@keyframes screen-shake {
  0%, 100% { transform: translateX(0); }
  10% { transform: translate(calc(var(--shake-intensity) * -1), calc(var(--shake-intensity) * 0.5)); }
  20% { transform: translate(calc(var(--shake-intensity) * 0.8), calc(var(--shake-intensity) * -0.8)); }
  30% { transform: translate(calc(var(--shake-intensity) * -0.6), var(--shake-intensity)); }
  40% { transform: translate(var(--shake-intensity), calc(var(--shake-intensity) * -0.5)); }
  50% { transform: translate(calc(var(--shake-intensity) * -0.9), calc(var(--shake-intensity) * 0.6)); }
  60% { transform: translate(calc(var(--shake-intensity) * 0.5), calc(var(--shake-intensity) * -1)); }
  70% { transform: translate(calc(var(--shake-intensity) * -0.7), calc(var(--shake-intensity) * 0.7)); }
  80% { transform: translate(var(--shake-intensity), calc(var(--shake-intensity) * -0.4)); }
  90% { transform: translate(calc(var(--shake-intensity) * -1), calc(var(--shake-intensity) * 0.9)); }
}
.screen-shake {
    animation: screen-shake var(--shake-duration) cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
    transform: translate3d(0, 0, 0); /* Hardware acceleration hint */
}

/* --- 12. Media Queries for Responsiveness --- */

/* Tablet & Smaller Devices (<= 992px) */
@media (max-width: 992px) {
    :root { --header-height: 75px; --header-shrink-height: 60px; }
    h1 { font-size: clamp(2rem, 6vw, 2.5rem); }
    h2 { font-size: clamp(1.6rem, 5vw, 2rem); }
    h3 { font-size: clamp(1.2rem, 4vw, 1.4rem); }
    section { padding: calc(var(--base-spacing) * 2.5) 0; }

    /* Header */
    #logo-img { max-height: 80%; } /* Adjust logo size */
    #hamburger-menu { display: block; } /* Show Hamburger */
    #main-nav { order: 3; margin-left: auto;} /* Move nav controls to the right */
    .header-toggles { margin-left: var(--base-spacing); order: 2; } /* Toggles before hamburger */

    #nav-links {
        position: fixed;
        top: 0; right: -100%; /* Start off-screen */
        width: min(75vw, 300px); /* Responsive width */
        height: 100vh;
        background-color: var(--bg-header);
        flex-direction: column;
        padding: calc(var(--header-height) + var(--base-spacing) * 2) var(--base-spacing); /* Padding below header */
        box-shadow: -5px 0 15px rgba(0,0,0,0.2);
        transition: right var(--transition-speed) ease-in-out, background-color var(--transition-speed) ease;
        overflow-y: auto; /* Allow scrolling if many links */
        z-index: 1002; /* Below hamburger, above content */
    }
    #nav-links.nav-open { right: 0; }
    #nav-links li { margin-left: 0; width: 100%; }
    #nav-links a.nav-item {
        display: block; /* Full width links */
        padding: calc(var(--base-spacing) * 0.8) var(--base-spacing);
        border-bottom: 1px solid var(--border-secondary);
        font-size: 1rem;
    }
    #nav-links a.nav-item::after { display: none; } /* Remove underline effect */
    #nav-links a.nav-item:hover,
    #nav-links a.nav-item:focus-visible,
    #nav-links a.nav-item.active,
    #nav-links a.nav-item[aria-current="page"] {
        background-color: var(--bg-secondary);
        color: var(--link-hover);
    }
    /* Dark mode mobile nav */
    [data-theme="dark"] #nav-links {
        background-color: var(--bg-header);
        box-shadow: -5px 0 15px rgba(255,255,255,0.1);
    }
    [data-theme="dark"] #nav-links a.nav-item {
         border-bottom-color: var(--border-secondary);
    }
     [data-theme="dark"] #nav-links a.nav-item:hover,
     [data-theme="dark"] #nav-links a.nav-item:focus-visible,
     [data-theme="dark"] #nav-links a.nav-item.active,
     [data-theme="dark"] #nav-links a.nav-item[aria-current="page"] {
          background-color: var(--bg-secondary);
          color: var(--link-hover);
     }

    /* Two column layouts stack */
    .about-content, .layout-two-column { grid-template-columns: 1fr; }
    .about-content .image-content { order: -1; margin-bottom: var(--grid-gap); } /* Image first in About */

    /* Footer */
    .footer-content { flex-direction: column; text-align: center; }
    .footer-left, .footer-right { text-align: center; width: 100%; }
    .social-links { justify-content: center; }
}

/* Mobile Devices (<= 768px) */
@media (max-width: 768px) {
    :root { --base-spacing: 0.8rem; } /* Slightly reduce base spacing */
    .container { width: 95%; }
    section { padding: calc(var(--base-spacing) * 3) 0; }

    #hero-section h1.hero-title { font-size: clamp(2.5rem, 10vw, 3.5rem); }
    #hero-section .tagline { font-size: clamp(1.3rem, 5vw, 1.6rem); }

    /* Stack grids with more than 2 items earlier */
    .league-grid, .gallery-grid, .merch-grid { grid-template-columns: 1fr 1fr; } /* Max 2 columns */
    .social-feeds-grid { grid-template-columns: 1fr; } /* Stack social feed */

    .contact-form { padding: calc(var(--base-spacing) * 1.5); }
    .popup-content { width: 95%; padding: var(--base-spacing); }
    .popup-close-button { font-size: 1.6rem; top: 8px; right: 10px; }
}

/* Small Mobile Devices (<= 576px) */
@media (max-width: 576px) {
     :root { --header-height: 65px; --header-shrink-height: 55px; }
     body { --line-height-em: 1.5; } /* Slightly adjust for small screens if needed */
     h1 { font-size: clamp(1.8rem, 7vw, 2.2rem); }
     h2 { font-size: clamp(1.4rem, 6vw, 1.8rem); }
     h3 { font-size: clamp(1.1rem, 5vw, 1.3rem); }

    .header-toggles { gap: calc(var(--base-spacing) * 0.5); }
    .header-toggles button, .header-button-link { font-size: 1rem; padding: 5px 8px; }

    .marquee-container { display: none; } /* Hide marquee on very small screens */

    /* All grids stack to 1 column */
    .league-grid, .gallery-grid, .merch-grid { grid-template-columns: 1fr; }

    .cta-button { padding: calc(var(--base-spacing) * 0.7) calc(var(--base-spacing) * 1.5); font-size: 0.9rem; }
    .back-to-top { width: 40px; height: 40px; font-size: 1.2rem; bottom: 15px; right: 15px; }
    .footer-left p, .designed-by-link { font-size: 0.8rem; }
    .social-links a { font-size: 1.3rem; }
}

/* Blog Page Specific Styles */
#blog-page .blog-page-title {
    text-align: center;
    margin-bottom: calc(var(--base-spacing) * 2);
}
#blog-page .blog-post {
    margin-bottom: calc(var(--base-spacing) * 2.5);
}
#blog-page .post-image-container { margin-bottom: var(--base-spacing); }
#blog-page .post-content { padding: var(--base-spacing) 0; } /* Add padding if no image */
#blog-page .post-title { font-size: 1.6rem; margin-bottom: calc(var(--base-spacing)*0.5); }
#blog-page .post-title a { color: var(--text-headings); }
#blog-page .post-title a:hover { color: var(--link-hover); text-decoration: none; }
#blog-page .post-excerpt { color: var(--text-secondary); font-size: 1rem; }
#blog-page .post-meta { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: calc(var(--base-spacing)*0.5); }
#blog-page .post-date { font-family: var(--font-handwritten); }
/* Pagination */
.pagination {
    margin-top: calc(var(--base-spacing) * 3);
    text-align: center;
}
.page-link {
    display: inline-block;
    padding: 8px 14px;
    margin: 0 3px;
    border: 1px solid var(--border-secondary);
    border-radius: 4px;
    color: var(--link-primary);
    text-decoration: none;
    transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
    font-size: 0.9rem;
}
.page-link:hover, .page-link:focus-visible {
    background-color: var(--link-primary);
    color: var(--text-light);
    border-color: var(--link-primary);
    text-decoration: none;
}
.page-link.current {
    background-color: var(--accent-secondary);
    color: var(--text-light);
    border-color: var(--accent-secondary);
    cursor: default;
}
.page-link.disabled {
    color: var(--text-disabled);
    background-color: var(--bg-disabled);
    border-color: var(--border-secondary);
    cursor: not-allowed;
    opacity: 0.7;
}
.page-link.disabled:hover {
    background-color: var(--bg-disabled); /* No hover effect */
    color: var(--text-disabled);
}
.page-link.ellipsis { border: none; padding: 8px 0;}


/* Ensure padding respects fixed header/marquee (added wrapper in blog.html) */
.main-content-area {
    /* Padding top could potentially be handled by body padding already */
    /* padding-top: calc(var(--header-height) + var(--marquee-height)); */
    /* transition: padding-top var(--transition-speed) ease; */
}
/* body.header-scrolled .main-content-area { */
    /* padding-top: calc(var(--header-shrink-height) + var(--marquee-height)); */
/* } */
